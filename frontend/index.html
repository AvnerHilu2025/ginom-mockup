<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>GINOM – Crisis Management AI (Mock)</title>

    <!-- Geist (recommended via @font-face in CSS; this keeps system fallback working) -->
    <!-- If you have local Geist woff2 files, add @font-face in styles.css -->

    <!-- Mapbox -->
    <link
      href="https://api.mapbox.com/mapbox-gl-js/v3.7.0/mapbox-gl.css"
      rel="stylesheet"
    />

    <!-- App CSS -->
    <link rel="stylesheet" href="styles.css" />
  </head>

  <body>
    <div class="app-shell">
      <!-- LEFT SIDEBAR -->
      <aside class="sidebar">
        <div class="sidebar__top">
            <div class="brand-mark">
              <a class="brand-mark__link" href="#" aria-label="Home">
                <img class="brand-mark__img" src="assets/logo/logo-black.svg" alt="GINOM" />
              </a>
            </div>

          <button class="icon-btn" type="button" aria-label="Collapse sidebar">
            <i data-lucide="menu"></i>
          </button>
        </div>

        <button class="primary-pill" type="button">
          <i data-lucide="plus"></i>
          <span>New Session</span>
        </button>

        <div class="sidebar__section">
          <div class="sidebar__label">RECENT SESSIONS</div>

          <a class="session-item session-item--active" href="#">
            <div class="session-item__icon session-item__icon--blue">
              <i data-lucide="zap"></i>
            </div>
            <div class="session-item__body">
              <div class="session-item__title">Earthquake Simulation</div>
              <div class="session-item__meta">Tel Aviv – Magnitude 6.4</div>
            </div>
          </a>

          <a class="session-item" href="#">
            <div class="session-item__icon session-item__icon--orange">
              <i data-lucide="shield-alert"></i>
            </div>
            <div class="session-item__body">
              <div class="session-item__title">Cyber Attack Response</div>
              <div class="session-item__meta">Power Grid – Critical</div>
            </div>
          </a>

          <a class="session-item" href="#">
            <div class="session-item__icon session-item__icon--teal">
              <i data-lucide="waves"></i>
            </div>
            <div class="session-item__body">
              <div class="session-item__title">Flood Impact Analysis</div>
              <div class="session-item__meta">Haifa Region</div>
            </div>
          </a>

          <a class="session-item" href="#">
            <div class="session-item__icon session-item__icon--violet">
              <i data-lucide="upload"></i>
            </div>
            <div class="session-item__body">
              <div class="session-item__title">Infrastructure Upload</div>
              <div class="session-item__meta">Multi-sector validation</div>
            </div>
          </a>
        </div>

        <div class="sidebar__section">
          <div class="sidebar__label">QUICK ACTIONS</div>

          <button class="ghost-action" type="button">
            <i data-lucide="upload"></i>
            <span>Upload Infrastructure</span>
          </button>

          <button class="ghost-action" type="button">
            <i data-lucide="git-branch"></i>
            <span>View Dependencies</span>
          </button>

          <button class="ghost-action" type="button">
            <i data-lucide="play"></i>
            <span>Run Simulation</span>
          </button>
        </div>

        <div class="sidebar__footer">
          <button class="ghost-action" type="button">
            <i data-lucide="help-circle"></i>
            <span>Help & Docs</span>
          </button>

          <button class="ghost-action" type="button">
            <i data-lucide="scroll-text"></i>
            <span>Activity Log</span>
          </button>

          <button class="ghost-action" type="button">
            <i data-lucide="settings"></i>
            <span>Settings</span>
          </button>

          <div class="user-chip">
            <div class="user-chip__avatar">CM</div>
            <div class="user-chip__meta">
              <div class="user-chip__name">Crisis Manager</div>
              <div class="user-chip__role">Admin Access</div>
            </div>
          </div>
        </div>
      </aside>

      <!-- MAIN COLUMN -->
      <main class="main">
        <!-- TOP BAR -->
        <header class="topbar">
          <div class="topbar__left">
            <div class="topbar__title">
              <span class="topbar__brand">GINOM</span>
              <span class="topbar__sub">Crisis Management AI</span>
            </div>

            <div class="status-pill">
              <span class="status-dot"></span>
              <span>System Operational</span>
            </div>
          </div>

          <div class="topbar__right">
            <button class="icon-btn" type="button" aria-label="Notifications">
              <i data-lucide="bell"></i>
            </button>
            <button class="icon-btn" type="button" aria-label="Theme">
              <i data-lucide="moon"></i>
            </button>
            <button class="icon-btn" type="button" aria-label="Apps">
              <i data-lucide="layout-grid"></i>
            </button>
          </div>
        </header>

        <!-- CENTER: MAP + OVERLAYS -->
        <section class="canvas">
          <div id="map" class="map"></div>
          <!-- SIM CONFIG MODAL (hidden by default) -->
          <div id="simOverlay" class="sim-overlay is-hidden" role="dialog" aria-modal="true" aria-label="Configure Simulation">
            <div class="sim-modal">
              <div class="sim-modal__header">
                <div>
                  <div class="sim-modal__title">Configure Simulation</div>
                  <div class="sim-modal__subtitle">Choose scenario and runtime parameters</div>
                </div>

                <div class="sim-pills">
                  <div class="sim-pill"><span>Sectors</span> <b id="simSectorsCount">0</b></div>
                  <div class="sim-pill"><span>Assets</span> <b id="simAssetsCount">0</b></div>
                </div>
              </div>

              <div class="sim-grid">
                <label class="sim-field">
                  <span class="sim-label">Area (city)</span>
                  <input id="simCity" class="sim-input" type="text" readonly />
                </label>

                <label class="sim-field">
                  <span class="sim-label">Scenario</span>
                  <select id="simScenario" class="sim-input">
                    <option value="earthquake">Earthquake</option>
                    <option value="cyber_attack">Cyber Attack</option>
                    <option value="tsunami">Tsunami</option>
                    <option value="pandemic">Pandemic</option>
                    <option value="severe_storm">Severe Storm</option>
                    <option value="wildfire">Wildfire</option>
                  </select>
                </label>

                <label class="sim-field sim-field--wide">
                  <span class="sim-label">Duration (hours): <b id="simDurationVal">72</b></span>
                  <input id="simDuration" type="range" min="1" max="168" value="72" />
                </label>

                <label class="sim-field sim-field--wide">
                  <span class="sim-label">Tick (minutes): <b id="simTickVal">10</b></span>
                  <input id="simTick" type="range" min="1" max="30" value="10" />
                </label>

                <label class="sim-field">
                  <span class="sim-label">Repair crews</span>
                  <input id="simCrews" class="sim-input" type="number" min="0" step="1" value="10" />
                </label>
              </div>

              <div class="sim-actions">
                <button id="simCancel" class="sim-btn sim-btn--ghost" type="button">Cancel</button>
                <button id="simConfirm" class="sim-btn sim-btn--primary" type="button">Confirm & Run</button>
              </div>
            </div>
          </div>
                      <!-- DEPENDENCIES OVERLAY -->
          <div id="dependenciesOverlay" class="deps-overlay is-hidden" role="dialog" aria-modal="true" aria-label="Infrastructure Dependencies">
            
            <div class="deps-modal">
              <div class="deps-modal__header">
                <div class="deps-modal__title">Infrastructure Dependencies</div>
                <button
                  id="depsCloseBtn"
                  class="icon-btn"
                  type="button"
                  aria-label="Close dependencies view"
                >
                  <i data-lucide="x"></i>
                </button>
              </div>

              <div class="deps-modal__body">
                <div class="deps-layout">
                  <!-- LEFT PANEL -->
                  <aside class="deps-side">
                    <div class="deps-side__header">
                      <div class="deps-side__title">Selected Asset</div>
                      <button id="depsResetViewBtn" class="sim-btn sim-btn--ghost" type="button">
                        Back to full graph
                      </button>
                    </div>

                    <div id="depsSelectedMeta" class="deps-selected-meta">
                      <div class="deps-selected-meta__name">—</div>
                      <div class="deps-selected-meta__sub">Double-click a node to focus</div>
                    </div>


                    <div class="deps-cols">
                      <div class="deps-col">
                        <div class="deps-col__title">Upstream (Depends on)</div>
                        <ul id="depsListUpstream" class="deps-list"></ul>
                      </div>

                      <div class="deps-col">
                        <div class="deps-col__title">Downstream (Supplies)</div>
                        <ul id="depsListDownstream" class="deps-list"></ul>
                      </div>
                    </div>
                  </aside>

                  <!-- GRAPH AREA -->
                  <div class="deps-graph-wrap">
                    <div id="depsGraphMount" class="deps-graph-mount"></div>
                  </div>
                </div>

              </div>
            </div>
          </div>
          <!-- ===================================================== -->
          <!-- Simulation Results Overlay (Post-run analysis modal)   -->
          <!-- ===================================================== -->
          <div id="resultsOverlay" class="deps-overlay is-hidden" aria-hidden="true">
            <div class="deps-modal" role="dialog" aria-modal="true" aria-labelledby="resultsTitle">
              <div class="deps-modal__header">
                <div class="deps-modal__title" id="resultsTitle">Simulation Analysis</div>
                <button id="resultsCloseBtn" class="icon-btn" title="Close" aria-label="Close">
                  ✕
                </button>
              </div>

              <div class="deps-modal__body">
                <div id="resultsMount" class="results-modal__content"></div>
              </div>
            </div>
          </div>


          <!-- Active Scenario Card -->
          <div id="activeScenarioCard" class="overlay overlay--scenario card">
            <div class="card__header">
              <div>
                <div class="card__title">Active Scenario</div>
                <div class="card__badge card__badge--critical">Critical</div>
              </div>
            </div>

              <div class="scenario-row">
                <i data-lucide="map-pin"></i>
                <span id="activeScenarioCity">—</span>
              </div>

              <div class="scenario-row">
                <i data-lucide="clock"></i>
                <span id="activeScenarioTime">—</span>
              </div>

              <div class="scenario-row">
                <i data-lucide="zap"></i>
                <span id="activeScenarioType">—</span>
              </div>

          </div>

          <!-- Sector Health -->
          <div id="healthOverlay" class="overlay overlay--health">

            <div class="metric card" data-sector="electricity">
                <div class="metric__row">
                <span class="metric__label">Electricity</span>
                <span class="metric__value">100%</span>
                </div>
                <div class="bar">
                <div class="bar__fill" style="width:100%"></div>
                </div>
            </div>

            <div class="metric card" data-sector="water">
                <div class="metric__row">
                <span class="metric__label">Water</span>
                <span class="metric__value">100%</span>
                </div>
                <div class="bar">
                <div class="bar__fill" style="width:100%"></div>
                </div>
            </div>

            <div class="metric card" data-sector="communication">
                <div class="metric__row">
                <span class="metric__label">Communication</span>
                <span class="metric__value">100%</span>
                </div>
                <div class="bar">
                <div class="bar__fill" style="width:100%"></div>
                </div>
            </div>

            <div class="metric card" data-sector="gas">
                <div class="metric__row">
                <span class="metric__label">Gas</span>
                <span class="metric__value">100%</span>
                </div>
                <div class="bar">
                <div class="bar__fill" style="width:100%"></div>
                </div>
            </div>

            <div class="metric card" data-sector="first_responders">
                <div class="metric__row">
                <span class="metric__label">First Responders</span>
                <span class="metric__value">100%</span>
                </div>
                <div class="bar">
                <div class="bar__fill" style="width:100%"></div>
                </div>
            </div>

            </div>

          


          <!-- Timeline (bottom) -->
          <div class="timeline card impact-timeline is-hidden" >
            <div class="timeline__header">
              <div class="timeline__title">Impact Timeline</div>
              <div class="timeline__controls">
                <button class="icon-btn icon-btn--small" type="button" aria-label="Back">
                  <i data-lucide="skip-back"></i>
                </button>
                <button class="icon-btn icon-btn--small" type="button" aria-label="Play">
                  <i data-lucide="play"></i>
                </button>
                <button class="icon-btn icon-btn--small" type="button" aria-label="Forward">
                  <i data-lucide="skip-forward"></i>
                </button>
              </div>
            </div>

            <div class="timeline__track">
              <span class="timeline__t">T+0:00</span>
              <input class="timeline__range" type="range" min="0" max="120" value="42" />
              <span class="timeline__t">T+2:00</span>
            </div>
          </div>
        </section>
      </main>

      <!-- RIGHT ASSISTANT PANEL -->
      <aside class="assistant">
        <div class="assistant__header">
          <div class="assistant__title">
            <div class="assistant__bot">
              <i data-lucide="bot"></i>
            </div>
            <div>
              <div class="assistant__name">GINOM Assistant</div>
              <div class="assistant__status"><span class="status-dot status-dot--small"></span> Active & Ready</div>
            </div>
          </div>
        </div>

        <div class="assistant__body">
          <div class="chat-bubble chat-bubble--bot">
            <div class="chat-bubble__text">
              Hello! I'm GINOM, your Crisis Management AI Assistant. I can help you simulate infrastructure disruptions,
              analyze cascading effects, and recommend optimal recovery strategies.
            </div>
            <div class="chat-bubble__time">14:20</div>
          </div>

          <div class="chat-bubble chat-bubble--bot">
            <div class="chat-bubble__text">
              What would you like to do today?
              <div class="quick-card">
                <button class="quick-btn" type="button"><i data-lucide="zap"></i> Run earthquake simulation</button>
                <button class="quick-btn" type="button"><i data-lucide="upload"></i> Upload infrastructure data</button>
                <button class="quick-btn" type="button"><i data-lucide="git-branch"></i> View dependencies</button>
              </div>
            </div>
            <div class="chat-bubble__time">14:20</div>
          </div>

        </div>

        <div class="assistant__composer">
          <input class="composer__input" type="text" placeholder="Type your message or command..." />
          <button class="composer__send" type="button" aria-label="Send">
            <i data-lucide="send"></i>
          </button>

          <div class="assistant__disclaimer">
            GINOM may display simulated data. Verify critical actions.
          </div>
        </div>
      </aside>
    </div>

   
    <!-- Lucide Icons -->
    <script src="https://unpkg.com/lucide@latest"></script>

    <!-- Mapbox -->
    <script src="https://api.mapbox.com/mapbox-gl-js/v3.7.0/mapbox-gl.js"></script>

    <!-- Chart.js (optional; used by Decision Support screens) -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.1/dist/chart.umd.min.js"></script>

    <!-- <script src="https://cdn.jsdelivr.net/npm/three@0.158.0/build/three.min.js"></script> -->
    <script src="https://cdn.jsdelivr.net/npm/3d-force-graph/dist/3d-force-graph.min.js"></script>
    <!-- App JS -->
    <script type="module" src="app.js"></script>

  </body>
</html>
